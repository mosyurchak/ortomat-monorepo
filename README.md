# üè• Ortomat - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–∞–∂—É –æ—Ä—Ç–æ–ø–µ–¥–∏—á–Ω–∏—Ö –≤–∏—Ä–æ–±—ñ–≤

## üìã –ó–º—ñ—Å—Ç

- [–ü—Ä–æ –ø—Ä–æ–µ–∫—Ç](#–ø—Ä–æ-–ø—Ä–æ–µ–∫—Ç)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
- [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç—É)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-—Ç–∞-–∑–∞–ø—É—Å–∫)
- [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
- [–û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ](#–æ—Å–Ω–æ–≤–Ω—ñ-–º–æ–¥—É–ª—ñ)
- [API Endpoints](#api-endpoints)
- [–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö](#–±–∞–∑–∞-–¥–∞–Ω–∏—Ö)
- [Deployment](#deployment)
- [–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–∞ —Ä–æ–ª—ñ](#–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ-—Ç–∞-—Ä–æ–ª—ñ)
- [Email —Å–∏—Å—Ç–µ–º–∞](#email-—Å–∏—Å—Ç–µ–º–∞)
- [QR Code —Å–∏—Å—Ç–µ–º–∞](#qr-code-—Å–∏—Å—Ç–µ–º–∞)
- [Troubleshooting](#troubleshooting)

---

## üéØ –ü—Ä–æ –ø—Ä–æ–µ–∫—Ç

**Ortomat** - —Ü–µ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏ –∑ –ø—Ä–æ–¥–∞–∂—É –æ—Ä—Ç–æ–ø–µ–¥–∏—á–Ω–∏—Ö –≤–∏—Ä–æ–±—ñ–≤. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î:

- üë®‚Äç‚öïÔ∏è –õ—ñ–∫–∞—Ä—è–º –≤–∏–¥–∞–≤–∞—Ç–∏ QR-–∫–æ–¥–∏ –ø–∞—Ü—ñ—î–Ω—Ç–∞–º –¥–ª—è –ø—Ä–∏–¥–±–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
- üöö –ö—É—Ä'—î—Ä–∞–º —É–ø—Ä–∞–≤–ª—è—Ç–∏ –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º –∞–≤—Ç–æ–º–∞—Ç—ñ–≤
- üë®‚Äçüíº –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≤—Å—é —Å–∏—Å—Ç–µ–º—É
- üí≥ –ü—Ä–∏–π–º–∞—Ç–∏ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ LiqPay
- üìß –í—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ email —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- üìä –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–∂—ñ–≤ —Ç–∞ –∫–æ–º—ñ—Å—ñ–π

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Backend
- **NestJS** - Node.js framework
- **Prisma ORM** - —Ä–æ–±–æ—Ç–∞ –∑ PostgreSQL
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- **SendGrid** - email —Å–µ—Ä–≤—ñ—Å
- **bcryptjs** - —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- **QRCode** - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è QR –∫–æ–¥—ñ–≤
- **LiqPay API** - –ø—Ä–∏–π–æ–º –ø–ª–∞—Ç–µ–∂—ñ–≤

### Frontend
- **Next.js 14** - React framework
- **TypeScript** - —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è
- **TailwindCSS** - —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è
- **React Query** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è
- **Recharts** - –≥—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ –¥—ñ–∞–≥—Ä–∞–º–∏

### DevOps
- **Railway** - —Ö–æ—Å—Ç–∏–Ω–≥ backend + PostgreSQL
- **Vercel** - —Ö–æ—Å—Ç–∏–Ω–≥ frontend
- **GitHub** - CI/CD

---

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        FRONTEND (Vercel)                     ‚îÇ
‚îÇ  Next.js + TypeScript + TailwindCSS                          ‚îÇ
‚îÇ  https://ortomat.com.ua                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ HTTPS/REST API
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     BACKEND (Railway)                        ‚îÇ
‚îÇ  NestJS + Prisma + PostgreSQL                                ‚îÇ
‚îÇ  https://ortomat-monorepo-production.up.railway.app          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                       ‚îÇ
    PostgreSQL              SendGrid
    (Railway)              (Email Service)
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
ortomat-monorepo/
‚îú‚îÄ‚îÄ backend/                        # NestJS Backend
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # Database schema
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/            # Database migrations
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                  # Authentication module
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.strategy.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/                 # Users module
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ courier/               # Courier management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ courier.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ courier.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ courier.module.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ortomats/              # Ortomats management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ortomats.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ortomats.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cells/                 # Cells management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cells.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cells.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/              # Products management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sales/                 # Sales tracking
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sales.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sales.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email/                 # Email service
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/         # Handlebars templates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qr-code/               # QR code generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qr-code.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ qr-code.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ invite/                # Ortomat invites
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ invite.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ invite.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma/                # Prisma service
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.service.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.ts
‚îÇ   ‚îú‚îÄ‚îÄ .env                       # Environment variables
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/                      # Next.js Frontend
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/            # Reusable components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/              # React contexts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/                   # Utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts            # API client
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ liqpay.ts         # LiqPay helpers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                 # Next.js pages
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx         # Landing page
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.tsx         # Login
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.tsx      # Registration (doctors only)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forgot-password.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reset-password.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verify-email.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/            # Admin dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx # Users management
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ortomats/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx  # Ortomat details
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sales/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doctor/           # Doctor dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ courier/          # Courier dashboard
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ globals.css
‚îÇ   ‚îú‚îÄ‚îÄ .env.local                # Environment variables
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îî‚îÄ‚îÄ README.md                      # This file
```

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### Prerequisites
- Node.js 18+
- PostgreSQL 14+
- Git

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone https://github.com/your-username/ortomat-monorepo.git
cd ortomat-monorepo
```

### 2. Backend Setup

```bash
cd backend
npm install

# –°—Ç–≤–æ—Ä–∏—Ç–∏ .env —Ñ–∞–π–ª
cp .env.example .env

# –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ .env (–¥–∏–≤. —Å–µ–∫—Ü—ñ—é –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
code .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó
npx prisma migrate dev

# Seed database (–æ–ø—Ü—ñ–π–Ω–æ)
npx prisma db seed

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
npm run start:dev
```

Backend –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:3001`

### 3. Frontend Setup

```bash
cd frontend
npm install

# –°—Ç–≤–æ—Ä–∏—Ç–∏ .env.local —Ñ–∞–π–ª
cp .env.local.example .env.local

# –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ .env.local
code .env.local

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ dev server
npm run dev
```

Frontend –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:3000`

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Backend Environment Variables (.env)

```env
# Database
DATABASE_URL="postgresql://username:password@localhost:5432/ortomat?schema=public"

# JWT
JWT_SECRET="your-super-secret-jwt-key-change-in-production"

# Frontend URL
FRONTEND_URL="http://localhost:3000"

# SendGrid Email
SENDGRID_API_KEY="SG.your-sendgrid-api-key"
SMTP_FROM="noreply@ortomat.com.ua"

# LiqPay (Payment)
LIQPAY_PUBLIC_KEY="your_liqpay_public_key"
LIQPAY_PRIVATE_KEY="your_liqpay_private_key"

# Server
PORT=3001
```

### Frontend Environment Variables (.env.local)

```env
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_FRONTEND_URL=http://localhost:3000
```

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ

### 1. Authentication Module

**–§–∞–π–ª–∏:** `backend/src/auth/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ–∫–∞—Ä—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –ª—ñ–∫–∞—Ä—ñ –º–æ–∂—É—Ç—å —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å –ø—É–±–ª—ñ—á–Ω–æ)
- –õ–æ–≥—ñ–Ω –∑ JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- Email –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- –†–æ–ª—å-–±–∞–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (RBAC)

**Endpoints:**
- `POST /api/auth/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ–∫–∞—Ä—è
- `POST /api/auth/login` - –õ–æ–≥—ñ–Ω
- `GET /api/auth/profile` - –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
- `GET /api/auth/verify-email?token=xxx` - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è email
- `POST /api/auth/forgot-password` - –ó–∞–ø–∏—Ç –Ω–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- `POST /api/auth/reset-password` - –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é

### 2. Courier Module

**–§–∞–π–ª–∏:** `backend/src/courier/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—É—Ä'—î—Ä—ñ–≤ (—Ç—ñ–ª—å–∫–∏ Admin)
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ—Ä—Ç–æ–º–∞—Ç—ñ–≤ –∫—É—Ä'—î—Ä–∞–º
- –û–¥–∏–Ω –æ—Ä—Ç–æ–º–∞—Ç = –æ–¥–∏–Ω –∫—É—Ä'—î—Ä
- –û–¥–∏–Ω –∫—É—Ä'—î—Ä = –±–∞–≥–∞—Ç–æ –æ—Ä—Ç–æ–º–∞—Ç—ñ–≤
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫—É—Ä'—î—Ä—ñ–≤

**Endpoints:**
- `POST /api/courier` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞ (Admin)
- `GET /api/courier` - –í—Å—ñ –∫—É—Ä'—î—Ä–∏ (Admin)
- `GET /api/courier/:id` - –û–¥–∏–Ω –∫—É—Ä'—î—Ä (Admin)
- `PATCH /api/courier/:id` - –û–Ω–æ–≤–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞ (Admin)
- `DELETE /api/courier/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞ (Admin)
- `GET /api/courier/available/ortomats` - –í—ñ–ª—å–Ω—ñ –æ—Ä—Ç–æ–º–∞—Ç–∏ (Admin)

### 3. Ortomats Module

**–§–∞–π–ª–∏:** `backend/src/ortomats/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –æ—Ä—Ç–æ–º–∞—Ç–∞–º–∏
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–º—ñ—Ä–∫–∞–º–∏ (37 –∫–æ–º—ñ—Ä–æ–∫ –Ω–∞ –æ—Ä—Ç–æ–º–∞—Ç)
- –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ –≤ –∫–æ–º—ñ—Ä–∫–∏
- –°—Ç–∞—Ç—É—Å –æ—Ä—Ç–æ–º–∞—Ç—ñ–≤ (online/offline)

**Endpoints:**
- `GET /api/ortomats` - –í—Å—ñ –æ—Ä—Ç–æ–º–∞—Ç–∏
- `GET /api/ortomats/:id` - –û–¥–∏–Ω –æ—Ä—Ç–æ–º–∞—Ç
- `POST /api/ortomats` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç (Admin)
- `PATCH /api/ortomats/:id` - –û–Ω–æ–≤–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç (Admin)
- `DELETE /api/ortomats/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç (Admin)

### 4. QR Code Module

**–§–∞–π–ª–∏:** `backend/src/qr-code/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö QR –∫–æ–¥—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ª—ñ–∫–∞—Ä—è
- QR –∫–æ–¥–∏ –º—ñ—Å—Ç—è—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π –∫–æ–¥ –ª—ñ–∫–∞—Ä—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–æ–º—ñ—Å—ñ–π

**Endpoints:**
- `GET /api/qr-code/doctor/:doctorId` - QR –∫–æ–¥ –ª—ñ–∫–∞—Ä—è
- `GET /api/qr-code/download/:doctorId` - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ QR

### 5. Sales Module

**–§–∞–π–ª–∏:** `backend/src/sales/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–¥–∞–∂—ñ–≤
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫–æ–º—ñ—Å—ñ–π –ª—ñ–∫–∞—Ä—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ä—Ç–æ–º–∞—Ç–∞—Ö
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ LiqPay

**Endpoints:**
- `GET /api/sales` - –í—Å—ñ –ø—Ä–æ–¥–∞–∂—ñ (Admin)
- `GET /api/sales/doctor/:doctorId` - –ü—Ä–æ–¥–∞–∂—ñ –ª—ñ–∫–∞—Ä—è
- `GET /api/sales/admin/stats` - –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Admin)

### 6. Email Module

**–§–∞–π–ª–∏:** `backend/src/email/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SendGrid
- Handlebars templates
- Email –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- Welcome email

**Templates:**
- `verify-email.hbs` - Email –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `welcome.hbs` - –í—ñ—Ç–∞–ª—å–Ω–∏–π email
- `reset-password.hbs` - –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é

### 7. Invite Module

**–§–∞–π–ª–∏:** `backend/src/invite/*`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è invite –ø–æ—Å–∏–ª–∞–Ω—å –¥–ª—è –æ—Ä—Ç–æ–º–∞—Ç—ñ–≤
- –õ—ñ–∫–∞—Ä—ñ –º–æ–∂—É—Ç—å –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—å –¥–æ –æ—Ä—Ç–æ–º–∞—Ç—É —á–µ—Ä–µ–∑ invite
- –¢–æ–∫–µ–Ω–∏ –¥—ñ—é—Ç—å 30 –¥–Ω—ñ–≤

**Endpoints:**
- `POST /api/invite/create/:ortomatId` - –°—Ç–≤–æ—Ä–∏—Ç–∏ invite (Admin)
- `GET /api/invite/validate?token=xxx` - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ invite
- `GET /api/invite/ortomat/:ortomatId` - –í—Å—ñ invites –æ—Ä—Ç–æ–º–∞—Ç—É
- `POST /api/invite/deactivate/:token` - –î–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ invite

---

## üåê API Endpoints

### Public Endpoints (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)

```
POST   /api/auth/register           - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ–∫–∞—Ä—è
POST   /api/auth/login              - –õ–æ–≥—ñ–Ω
GET    /api/auth/verify-email       - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è email
POST   /api/auth/forgot-password    - –ó–∞–ø–∏—Ç –Ω–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
POST   /api/auth/reset-password     - –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é
```

### Protected Endpoints (–ø–æ—Ç—Ä–µ–±—É—é—Ç—å JWT —Ç–æ–∫–µ–Ω)

#### Admin Only
```
POST   /api/courier                 - –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞
GET    /api/courier                 - –í—Å—ñ –∫—É—Ä'—î—Ä–∏
PATCH  /api/courier/:id             - –û–Ω–æ–≤–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞
DELETE /api/courier/:id             - –í–∏–¥–∞–ª–∏—Ç–∏ –∫—É—Ä'—î—Ä–∞
POST   /api/ortomats                - –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç
PATCH  /api/ortomats/:id            - –û–Ω–æ–≤–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç
DELETE /api/ortomats/:id            - –í–∏–¥–∞–ª–∏—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç
GET    /api/sales                   - –í—Å—ñ –ø—Ä–æ–¥–∞–∂—ñ
GET    /api/users                   - –í—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
POST   /api/invite/create/:id       - –°—Ç–≤–æ—Ä–∏—Ç–∏ invite
```

#### Doctor Endpoints
```
GET    /api/auth/profile            - –ü—Ä–æ—Ñ—ñ–ª—å –ª—ñ–∫–∞—Ä—è
GET    /api/qr-code/doctor/:id      - QR –∫–æ–¥ –ª—ñ–∫–∞—Ä—è
GET    /api/sales/doctor/:id        - –ü—Ä–æ–¥–∞–∂—ñ –ª—ñ–∫–∞—Ä—è
```

#### Courier Endpoints
```
GET    /api/ortomats                - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –æ—Ä—Ç–æ–º–∞—Ç–∏
PATCH  /api/cells/:id               - –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–º—ñ—Ä–∫—É
```

---

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### Prisma Schema

**–û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥–µ–ª—ñ:**

1. **User** - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (Admin, Doctor, Courier)
2. **Ortomat** - –ê–≤—Ç–æ–º–∞—Ç–∏
3. **Cell** - –ö–æ–º—ñ—Ä–∫–∏ –≤ –∞–≤—Ç–æ–º–∞—Ç—ñ (37 –Ω–∞ –∫–æ–∂–µ–Ω –æ—Ä—Ç–æ–º–∞—Ç)
4. **Product** - –ü—Ä–æ–¥—É–∫—Ç–∏
5. **DoctorOrtomat** - –ó–≤'—è–∑–æ–∫ –ª—ñ–∫–∞—Ä—è –∑ –æ—Ä—Ç–æ–º–∞—Ç–æ–º + —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π –∫–æ–¥
6. **CourierOrtomat** - –ó–≤'—è–∑–æ–∫ –∫—É—Ä'—î—Ä–∞ –∑ –æ—Ä—Ç–æ–º–∞—Ç–æ–º
7. **Sale** - –ü—Ä–æ–¥–∞–∂—ñ
8. **ActivityLog** - –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º–∏
9. **EmailLog** - Email –ª–æ–≥–∏
10. **OrtomatInvite** - Invite –ø–æ—Å–∏–ª–∞–Ω–Ω—è

### –ú—ñ–≥—Ä–∞—Ü—ñ—ó

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –º—ñ–≥—Ä–∞—Ü—ñ—é
npx prisma migrate dev --name migration_name

# –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
npx prisma migrate deploy

# –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ schema –∑ –ë–î (pull)
npx prisma db pull

# –í—ñ–¥–∫—Ä–∏—Ç–∏ Prisma Studio (GUI –¥–ª—è –ë–î)
npx prisma studio
```

---

## üöÄ Deployment

### Backend (Railway)

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ [Railway.app](https://railway.app)
2. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
3. –î–æ–¥–∞–π—Ç–µ PostgreSQL service
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
5. Root Directory: `/backend`
6. Build Command: `npm run build`
7. Start Command: `npm run start:prod`

**Environment Variables –Ω–∞ Railway:**
```
DATABASE_URL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ PostgreSQL)
JWT_SECRET (–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Å–∏–ª—å–Ω–∏–π —Å–µ–∫—Ä–µ—Ç - –¥–∏–≤. —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –Ω–∏–∂—á–µ)
FRONTEND_URL
RESEND_API_KEY
RESEND_FROM
MONO_TOKEN
PORT=3001
```

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: JWT_SECRET Security**

JWT_SECRET –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ —Å–∏–ª—å–Ω–∏–º –≤–∏–ø–∞–¥–∫–æ–≤–∏–º —Ä—è–¥–∫–æ–º.

**–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–∏–ª—å–Ω–∏–π JWT_SECRET:**
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
```

**–û–Ω–æ–≤–∏—Ç–∏ JWT_SECRET –Ω–∞ Railway:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Variables
2. –î–æ–¥–∞–π—Ç–µ/–æ–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É `JWT_SECRET` –∑—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏ - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤—ñ—Å
4. ‚ö†Ô∏è –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥–∏ –∑ `.env.example` –≤ production!

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ó–º—ñ–Ω–∞ JWT_SECRET –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Å—ñ—Ö —ñ—Å–Ω—É—é—á–∏—Ö JWT —Ç–æ–∫–µ–Ω—ñ–≤, —Ç–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–∞—é—Ç—å –ø–µ—Ä–µ–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—å.

### Frontend (Vercel)

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ [Vercel.com](https://vercel.com)
2. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
3. Root Directory: `/frontend`
4. Framework Preset: Next.js
5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**Environment Variables –Ω–∞ Vercel:**
```
NEXT_PUBLIC_API_URL=https://ortomat-monorepo-production.up.railway.app
NEXT_PUBLIC_FRONTEND_URL=https://ortomat.com.ua
```

### Custom Domain

1. –í Vercel: Settings ‚Üí Domains ‚Üí Add `ortomat.com.ua`
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ —É –≤–∞—à–æ–≥–æ domain provider:
   ```
   A     @     76.76.21.21
   CNAME www   cname.vercel-dns.com
   ```

---

## üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–∞ —Ä–æ–ª—ñ

### –¢–∏–ø–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

#### 1. Admin üë®‚Äçüíº
**–î–æ—Å—Ç—É–ø:** –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∏—Å—Ç–µ–º–∏

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏/—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –∫—É—Ä'—î—Ä—ñ–≤
- –£–ø—Ä–∞–≤–ª—è—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç–∞–º–∏
- –£–ø—Ä–∞–≤–ª—è—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- –ü—Ä–∏–∑–Ω–∞—á–∞—Ç–∏ –æ—Ä—Ç–æ–º–∞—Ç–∏ –∫—É—Ä'—î—Ä–∞–º
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥–∞–∂—ñ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ invite –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –ª—ñ–∫–∞—Ä—ñ–≤
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

**–¢–µ—Å—Ç–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç (–¢–Ü–õ–¨–ö–ò –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏):**
```
Email: admin@ortomat.ua
Password: password123
```

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:** –¶—ñ –∞–∫–∞—É–Ω—Ç–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –ª–∏—à–µ —á–µ—Ä–µ–∑ `npx prisma db seed` —ñ –ù–ï –ø–æ–≤–∏–Ω–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å –≤ production!

#### 2. Doctor üë®‚Äç‚öïÔ∏è
**–î–æ—Å—Ç—É–ø:** –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤—ñ–π QR –∫–æ–¥
- –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ QR –∫–æ–¥ –¥–ª—è –¥—Ä—É–∫—É
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤–æ—ó –ø—Ä–æ–¥–∞–∂—ñ
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–º—ñ—Å—ñ–π
- –ü—Ä–∏—î–¥–Ω—É–≤–∞—Ç–∏—Å—å –¥–æ –æ—Ä—Ç–æ–º–∞—Ç—ñ–≤ —á–µ—Ä–µ–∑ invite

**–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è:** –ü—É–±–ª—ñ—á–Ω–∞ —á–µ—Ä–µ–∑ `/register`

**–¢–µ—Å—Ç–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç (–¢–Ü–õ–¨–ö–ò –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏):**
```
Email: doctor@ortomat.ua
Password: password123
```

#### 3. Courier üöö
**–î–æ—Å—Ç—É–ø:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ –æ—Ä—Ç–æ–º–∞—Ç–∞–º–∏

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –æ—Ä—Ç–æ–º–∞—Ç–∏
- –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω –∫–æ–º—ñ—Ä–æ–∫
- –î–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑ –∫–æ–º—ñ—Ä–æ–∫
- –ü–æ–∑–Ω–∞—á–∞—Ç–∏ –∫–æ–º—ñ—Ä–∫–∏ —è–∫ –Ω–∞–ø–æ–≤–Ω–µ–Ω—ñ

**–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è:** –¢—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ Admin –ø–∞–Ω–µ–ª—å

**–¢–µ—Å—Ç–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç (–¢–Ü–õ–¨–ö–ò –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏):**
```
Email: courier@ortomat.ua
Password: password123
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

```sql
-- Admin
INSERT INTO users (id, email, password, role, "firstName", "lastName", phone, "isVerified")
VALUES (
  gen_random_uuid(),
  'admin@ortomat.ua',
  '$2a$10$hashed_password_here', -- password123
  'ADMIN',
  '–ê–¥–º—ñ–Ω',
  '–°–∏—Å—Ç–µ–º–∞',
  '+380501234567',
  true
);

-- Doctor
INSERT INTO users (id, email, password, role, "firstName", "lastName", phone, "isVerified")
VALUES (
  gen_random_uuid(),
  'doctor@ortomat.ua',
  '$2a$10$hashed_password_here',
  'DOCTOR',
  '–Ü–≤–∞–Ω',
  '–ü–µ—Ç—Ä–æ–≤',
  '+380501234568',
  true
);

-- Courier
INSERT INTO users (id, email, password, role, "firstName", "lastName", phone, "isVerified")
VALUES (
  gen_random_uuid(),
  'courier@ortomat.ua',
  '$2a$10$hashed_password_here',
  'COURIER',
  '–ü–µ—Ç—Ä–æ',
  '–Ü–≤–∞–Ω–æ–≤',
  '+380501234569',
  true
);
```

---

## üìß Email —Å–∏—Å—Ç–µ–º–∞

### SendGrid Setup

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ [SendGrid.com](https://sendgrid.com)
2. Verify domain `ortomat.com.ua`
3. –°—Ç–≤–æ—Ä—ñ—Ç—å API Key
4. –î–æ–¥–∞–π—Ç–µ –≤ `.env`:
   ```
   SENDGRID_API_KEY=SG.your_api_key
   SMTP_FROM=noreply@ortomat.com.ua
   ```

### Email Templates

–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è: `backend/src/email/templates/*.hbs`

**–î–æ—Å—Ç—É–ø–Ω—ñ templates:**
1. `verify-email.hbs` - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è email
2. `welcome.hbs` - –í—ñ—Ç–∞–ª—å–Ω–∏–π –ª–∏—Å—Ç
3. `reset-password.hbs` - –°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é

**–ü—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ template:**

```handlebars
<!-- backend/src/email/templates/new-template.hbs -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{{subject}}</title>
</head>
<body>
  <h1>Hello {{firstName}}!</h1>
  <p>Your custom content here.</p>
  <footer>
    <p>¬© {{year}} Ortomat</p>
  </footer>
</body>
</html>
```

---

## üì± QR Code —Å–∏—Å—Ç–µ–º–∞

### –Ø–∫ –ø—Ä–∞—Ü—é—î

1. –ö–æ–∂–µ–Ω –ª—ñ–∫–∞—Ä –æ—Ç—Ä–∏–º—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π –∫–æ–¥
2. QR –∫–æ–¥ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∑ URL: `https://ortomat.com.ua/buy?ref=XXXX`
3. –ö–æ–ª–∏ –ø–∞—Ü—ñ—î–Ω—Ç —Å–∫–∞–Ω—É—î QR:
   - –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤–∏–±–æ—Ä—É –æ—Ä—Ç–æ–º–∞—Ç—É
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π –∫–æ–¥ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è
   - –ü—ñ—Å–ª—è –ø–æ–∫—É–ø–∫–∏ –ª—ñ–∫–∞—Ä –æ—Ç—Ä–∏–º—É—î –∫–æ–º—ñ—Å—ñ—é (10%)

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR –∫–æ–¥—ñ–≤

```typescript
// backend/src/qr-code/qr-code.service.ts
import * as QRCode from 'qrcode';

async generateQRCode(doctorId: string) {
  const doctorOrtomat = await this.findDoctorOrtomat(doctorId);
  const url = `${process.env.FRONTEND_URL}/buy?ref=${doctorOrtomat.referralCode}`;
  
  const qrCode = await QRCode.toDataURL(url, {
    width: 300,
    margin: 2,
  });
  
  return qrCode; // base64 image
}
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env —Ñ–∞–π–ª
cat backend/.env

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ë–î
npx prisma db push

# –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏
npm run start:dev
```

### –ü—Ä–æ–±–ª–µ–º–∞: Frontend –Ω–µ –º–æ–∂–µ –∑'—î–¥–Ω–∞—Ç–∏—Å—å –∑ Backend

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `NEXT_PUBLIC_API_URL` –≤ `.env.local`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ backend –∑–∞–ø—É—â–µ–Ω–∏–π
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `backend/src/main.ts`

### –ü—Ä–æ–±–ª–µ–º–∞: Email –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `SENDGRID_API_KEY` –≤ `.env`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ SendGrid logs –Ω–∞ —ó—Ö —Å–∞–π—Ç—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ domain verified
4. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ `email_logs` —Ç–∞–±–ª–∏—Ü—é –≤ –ë–î

### –ü—Ä–æ–±–ª–µ–º–∞: JWT —Ç–æ–∫–µ–Ω invalid

```bash
# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Å–∏–ª—å–Ω–∏–π JWT_SECRET (64 bytes –≤ base64)
node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"

# –û–Ω–æ–≤—ñ—Ç—å –≤ .env (–ª–æ–∫–∞–ª—å–Ω–æ)
JWT_SECRET=wX8F2VpSNEGuFP2990cI6aIqhZicRX3ugaxtNFm96hsp6ZOH9IsBKD9WxaY06T1Wn6DsM5nM0oJUfR5zz9+5KQ==

# –û–Ω–æ–≤—ñ—Ç—å –≤ Railway (production)
# Railway Dashboard ‚Üí Variables ‚Üí JWT_SECRET ‚Üí Save
```

### –ü—Ä–æ–±–ª–µ–º–∞: Prisma migration failed

```bash
# Reset database (–£–í–ê–ì–ê: –≤–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ –¥–∞–Ω—ñ!)
npx prisma migrate reset

# –ê–±–æ –≤–∏–ø—Ä–∞–≤—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—é –≤—Ä—É—á–Ω—É
npx prisma migrate dev --create-only
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ SQL —Ñ–∞–π–ª
npx prisma migrate dev
```

### –ü—Ä–æ–±–ª–µ–º–∞: Module not found errors

```bash
# Backend
cd backend
rm -rf node_modules package-lock.json
npm install

# Frontend
cd frontend
rm -rf node_modules package-lock.json .next
npm install
```

---

## üìù –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### Backend

```bash
# Development
npm run start:dev

# Production build
npm run build
npm run start:prod

# Prisma
npx prisma studio              # Open GUI
npx prisma migrate dev         # Create migration
npx prisma migrate deploy      # Apply migrations
npx prisma generate           # Generate client
npx prisma db seed            # Seed database

# Testing
npm run test
npm run test:e2e
```

### Frontend

```bash
# Development
npm run dev

# Production build
npm run build
npm run start

# Linting
npm run lint
npm run lint:fix

# Type checking
npm run type-check
```

---

## üîê –ë–µ–∑–ø–µ–∫–∞

### –í–∞–∂–ª–∏–≤–æ

1. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª–∏**
2. **–ó–º—ñ–Ω—ñ—Ç—å –≤—Å—ñ –ø–∞—Ä–æ–ª—ñ —Ç–∞ —Å–µ–∫—Ä–µ—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω**
3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω**
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ strong JWT secrets (64+ bytes, base64 encoded)
  ```bash
  node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
  ```
- ‚ö†Ô∏è –ù–∞–ª–∞—à—Ç—É–π—Ç–µ rate limiting –¥–ª—è auth endpoints
- ‚úÖ –í–∫–ª—é—á—ñ—Ç—å CORS —Ç—ñ–ª—å–∫–∏ –¥–ª—è trusted domains
- üîí Backend HTML sanitization –¥–ª—è product descriptions (XSS protection)
- üîê Role-based access control (RBAC) –Ω–∞ –≤—Å—ñ—Ö admin endpoints
- üíæ –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ–±—ñ—Ç—å backup –ë–î
- üìä –ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- üîÑ Validation pipe –Ω–∞ –≤—Å—ñ—Ö DTOs

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è

### Activity Logs

–í—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–¥—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ `activity_logs`:

```typescript
enum LogType {
  CELL_OPENED
  CELL_FILLED
  ORDER_CREATED
  PAYMENT_SUCCESS
  LOGIN_SUCCESS
  COURIER_CHECKIN
  // —Ç–∞ —ñ–Ω—à—ñ...
}
```

### Email Logs

–í—Å—ñ email –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `email_logs` –∑ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
- `PENDING` - –≤ —á–µ—Ä–∑—ñ
- `SENT` - –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ
- `FAILED` - –ø–æ–º–∏–ª–∫–∞
- `BOUNCED` - –ø–æ–≤–µ—Ä–Ω—É–≤—Å—è

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```bash
# Railway logs
railway logs

# Local development
npm run start:dev  # –∫–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∂–µ –≤—Å—ñ –ª–æ–≥–∏
```

---

## ü§ù Contributing

### Workflow

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É –≥—ñ–ª–∫—É: `git checkout -b feature/your-feature`
2. –ó—Ä–æ–±—ñ—Ç—å –∑–º—ñ–Ω–∏
3. Commit: `git commit -m "feat: add new feature"`
4. Push: `git push origin feature/your-feature`
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

### Commit Convention

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ [Conventional Commits](https://www.conventionalcommits.org/):

```
feat: –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è
fix: –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –±–∞–≥–∞
docs: –∑–º—ñ–Ω–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
style: —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
refactor: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
test: –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤
chore: –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏

- **GitHub:** [ortomat-monorepo](https://github.com/your-username/ortomat-monorepo)
- **Website:** https://ortomat.com.ua
- **Backend API:** https://ortomat-monorepo-production.up.railway.app

---

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–¥ —è–∫ –∑–∞–≤–≥–æ–¥–Ω–æ!

---

## üéØ Roadmap

### –í —Ä–æ–∑—Ä–æ–±—Ü—ñ
- [ ] Mobile app (React Native)
- [ ] Payment integration (LiqPay)
- [ ] WebSocket real-time updates
- [ ] Advanced analytics dashboard
- [ ] Multi-language support
- [ ] SMS notifications
- [ ] Inventory management system

### –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- [x] User authentication
- [x] QR code system
- [x] Email notifications
- [x] Admin panel
- [x] Doctor dashboard
- [x] Courier management
- [x] Password recovery
- [x] Ortomat invites system

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** –ñ–æ–≤—Ç–µ–Ω—å 2024

**–í–µ—Ä—Å—ñ—è:** 1.0.0

**–ê–≤—Ç–æ—Ä:** Ortomat Team
